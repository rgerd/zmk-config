/*
 * Copyright (c) 2022 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/ext_power.h>

 / {
    keymap {
        compatible = "zmk,keymap";

        /* ---------- LAYER 0: BASE (per-hand order) ---------- */
        layer_base: base {
            bindings = <
                /* LEFT rows (6x4) */
                &kp ESC   &kp N1   &kp N2    &kp N3    &kp N4    &kp N5
                &kp TAB   &kp Q    &kp W     &kp E     &kp R     &kp T
                &kp LSHFT &kp A    &kp S     &kp D     &kp F     &kp G
                &mo 2     &kp Z    &kp X     &kp C     &kp V     &kp B

                /* LEFT thumbs (4) */
                &kp LCTRL &kp LALT &kp LGUI  &kp SPACE

                /* RIGHT rows (6x4) */
                &kp N6    &kp N7   &kp N8    &kp N9    &kp N0     &kp SQT
                &kp Y     &kp U    &kp I     &kp O     &kp P      &kp MINUS
                &kp H     &kp J    &kp K     &kp L     &kp SEMI   &kp EQUAL
                &kp N     &kp M    &kp COMMA &kp DOT   &kp SLASH  &kp RSHFT

                /* RIGHT thumbs (4) */
                &kp RET   &mo 1    &kp LBKT  &kp RBKT
            >;
        };

        /* ---------- LAYER 1: NAV (arrows, tilde, backspace, home/end) ---------- */
        nav: layer_nav {
            bindings = <
                /* LEFT rows */
                &trans &trans &trans &trans &trans &trans
                &trans &trans &trans &trans &trans &trans
                &trans &trans &trans &trans &trans &trans
                &trans &trans &trans &trans &trans &trans

                /* LEFT thumbs */
                &trans &trans &trans &trans

                /* RIGHT rows */
                &trans &trans &trans &trans &trans &kp TILDE   /* SQT → `~ */
                &trans &kp HOME &kp UP &kp END &trans &kp BSPC /* U=Home, I=Up, O=End, -_=Backspace */
                &trans &kp LEFT &kp DOWN &kp RIGHT &trans &trans
                &trans &trans &trans &trans &trans &trans

                /* RIGHT thumbs */
                &trans &trans &trans &trans
            >;
        };

        /* ---------- LAYER 2: FN (F1–F12 on number row) ---------- */
        fn: layer_fn {
            bindings = <
                /* LEFT rows */
                &kp F1 &kp F2 &kp F3 &kp F4 &kp F5 &kp F6
                &trans &trans &trans &trans &trans &trans
                &trans &trans &trans &trans &trans &trans
                &trans &trans &trans &trans &trans &trans

                /* LEFT thumbs */
                &trans &trans &trans &trans

                /* RIGHT rows */
                &kp F7 &kp F8 &kp F9 &kp F10 &kp F11 &kp F12
                &trans &trans &trans &trans &trans &trans
                &trans &trans &trans &trans &trans &trans
                &trans &trans &trans &trans &trans &trans

                /* RIGHT thumbs */
                &trans &trans &trans &trans
            >;
        };

        /* ---------- ENCODERS ---------- */
        sensor-bindings = <
            &inc_dec_kp C_BRIGHTNESS_INC C_BRIGHTNESS_DEC   /* left encoder: screen brightness */
            &inc_dec_kp C_VOLUME_UP      C_VOLUME_DOWN      /* right encoder: volume */
        >;
    };
};
